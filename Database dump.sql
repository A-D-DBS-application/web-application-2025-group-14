CREATE TABLE lifecycle (
  lifecycle text NOT NULL PRIMARY KEY
);

CREATE TABLE materiaal (
  materiaal_id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  type text NOT NULL,
  omschrijving text NOT NULL,
  lifecycle text,
  merk text NOT NULL,
  prijs numeric,
  CONSTRAINT UC1 UNIQUE(type, omschrijving),
  FOREIGN KEY (lifecycle) REFERENCES lifecycle (lifecycle)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE zone (
  zone text NOT NULL PRIMARY KEY
);

CREATE TABLE item (
  item_id int GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  materiaal_id int NOT NULL,
  zone text NOT NULL,
  doel text NOT NULL,
  verpakking text NOT NULL,
  aantal int NOT NULL DEFAULT 0,
  comment text,
  CONSTRAINT UC2 UNIQUE(materiaal_id, zone, doel, verpakking),
  CONSTRAINT CC2 CHECK(doel IN('to keep', 'for sale', 'to be thrown away')),
  CONSTRAINT CC3 CHECK(verpakking IN('open', 'gesloten', 'geen')),
  FOREIGN KEY (materiaal_id) REFERENCES materiaal (materiaal_id)
    ON DELETE RESTRICT ON UPDATE CASCADE,
  FOREIGN KEY (zone) REFERENCES zone (zone)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE gebruik (
  item_id int NOT NULL,
  gebruiker text NOT NULL,
  datum timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  hoeveelheid int NOT NULL,
  project text,
  reservatie text,
  PRIMARY KEY (item_id, gebruiker, datum),
  FOREIGN KEY (item_id) REFERENCES item (item_id)
    ON DELETE CASCADE ON UPDATE CASCADE
);


INSERT INTO "public"."lifecycle" ("lifecycle") VALUES ('alleen omruil- of reparatieservice beschikbaar, opvolger: 6ES7138-4FB04-0AB0'), ('niet meer verkrijgbaar, opvolger: 6ES7131-4BD01-0AA0'), ('NMV');
INSERT INTO "public"."materiaal" ("materiaal_id", "type", "omschrijving", "lifecycle", "merk", "prijs") VALUES ('1', '3SB3400-0M', 'SCHAKELELEMENT Met 1 schakelelement, 1NC, Montagebewakingscontact, Schroefaansluiting, Voor frontplaatbevestiging !!! Uitlopend product!!! Opvolger is SIRIUS ACT 3SU1 Voorkeurstype opvolger is >>3SU1400-1AA10-1HA0<<', 'NMV', 'SIEMENS', null), ('2', '6ES7138-4CA01-0AA0', '*** Spare part *** SIMATIC DP, PM-E power modules for ET 200S; 24 V DC with diagnostics', null, 'SIEMENS', '26'), ('3', '6ES7131-4BD01-0AA0', '*** Spare part *** SIMATIC DP, 5 electronic modules for ET 200S, 4DI standard 24 V DC, 15 mm width, 5 units per packing unit', null, 'SIEMENS', '245'), ('4', '3SB3901-0AB', 'Drager Voor opklikken Van 3 elementen, Voor druk-, Paddestoeldrukknop, Drukknopschakelaars met trekontgrendeling en Drukschakelaar Met frontplaatbevestiging !!! Uitlopend product!!! Opvolger is SIRIUS ACT 3SU1', 'NMV', 'SIEMENS', null), ('5', '3RH1921-1HA22', 'Auxiliary switch block, 22, 2 NO + 2 NC, EN 50012, 4-pole, screw terminal, for motor contactors, Size S0 .. S3 ! Phased-out product! Successor is SIRIUS 3RH3', 'NMV', 'SIEMENS', null), ('6', '6ES7193-4CB20-0AA0', '*** Spare part *** SIMATIC DP, 5 terminal modules TM-E15S24-01 for ET 200S for electronic modules 15 mm width, Screw terminals, 2x4 terminal connections without terminal access to AUX1, AUX1 continuous 5 units per packing unit', null, 'SIEMENS', '75'), ('7', '3RT1015-1AP01', 'Vermogensrelais, AC-3 7 A, 3 kW / 400 V 1 NO, AC 230 V, 50 / 60 Hz 3-polig, Uitvoering S00 Schroefaansluiting !!! Uitlopend product!!! Opvolger is SIRIUS 3RT2 Voorkeurstype opvolger is >>3RT2015-1AP01<<', 'NMV', 'SIEMENS', null), ('8', '6ES7138-4FB03-0AB0', '***Spare part*** SIMATIC DP, Electronics module f. ET200S, 4 F-DO PROFIsafe, 24 V DC/2 A, 30 mm overall width, up to Category 4 (EN 954-1)/ SIL3 (IEC61508)/PLE (ISO13849), can also be used in PROFINET configuration with IM 151-3 HF', 'alleen omruil- of reparatieservice beschikbaar, opvolger: 6ES7138-4FB04-0AB0', 'SIEMENS', null), ('9', '6ES7132-4BD02-0AA0', '*** Spare part *** SIMATIC DP, 5 electronic modules for ET 200S, 4 DO standard 24 V DC/0.5 A, 15 mm width, 5 units per packing unit', null, 'SIEMENS', '332'), ('10', '6ES7193-4CA40-0AA0', '*** Spare part *** SIMATIC DP, 5 universal terminal modules TM-E15S26-A1 for ET 200S for electronic modules 15 mm width, Screw terminals, 2x6 terminal connections with terminal access to AUX1, AUX1 continuous 5 units per packing unit', null, 'SIEMENS', '98'), ('11', '6ES7193-4CB30-0AA0', '*** Spare part *** SIMATIC DP, 5 terminal modules TM-E15C24-01 for ET 200S for electronic modules 15 mm width, spring-type terminals 2x4 terminal connections without terminal access to AUX1, AUX1 continuous 5 units per packing unit', null, 'SIEMENS', '74'), ('12', '6ES7132-4BD32-0AA0', '*** Spare part *** SIMATIC DP, 5 electronic modules for ET 200S, 4 DO standard 24 V DC/2 A, 15 mm width, 5 units per packing unit', null, 'SIEMENS', '643'), ('13', '6ES7193-4CA20-0AA0', '*** Spare part *** SIMATIC DP, 5 terminal modules TM-E15S24-A1 for ET 200S for electronic modules 15 mm width, Screw terminals, 2x4 terminal connections with terminal access to AUX1, AUX1 continuous 5 units per packing unit', null, 'SIEMENS', '75'), ('14', '3RT1916-1CD00', 'RC-element AC 127 - 240 V, DC 150 - 250 V Overspanningsbegrenzer voor opbouw op contactors Uitvoering S00 !!! Uitlopend product!!! Opvolger is SIRIUS 3RT2 Voorkeurstype opvolger is >>3RT2916-1CD00<<', 'NMV', 'SIEMENS', null), ('15', '6ES7131-4BD00-0AA0', 'SIMATIC DP, 5 ELECTRON. MODULES FOR ET 200S, 4 DI STANDARD 24V DC, 15 MM WIDTH, 5 PIECES PER PACKAGING UNIT', 'niet meer verkrijgbaar, opvolger: 6ES7131-4BD01-0AA0', 'SIEMENS', null), ('16', '3SB3610-2EA11', 'Knevelschakelaar, 22 mm, Rond, Metaal, Zwart, Knevel, kort, 3 schakelstanden I-O-II, TERUGVEREND, Schakelhoek 2x50 graden, Met houder, 1 NO, 1 NO, Schroefaansluiting !!! Uitlopend product!!! Opvolger is SIRIUS ACT 3SU1 Voorkeurstype opvolger is >>3SU1150-2BM60-1NA0<<', 'NMV', 'SIEMENS', null), ('17', '6ES7193-4CF50-0AA0', '*** Spare part *** SIMATIC DP, Terminal module TM-E30C46-A1 for ET 200S for electronic modules 30 mm overall width, spring-type terminals 4x 6 terminal connections with terminal access to AUX1, AUX1 continuous', null, 'SIEMENS', '64'), ('18', '6ES7132-4HB01-0AB0', '*** Spare part *** SIMATIC DP, 5 electronic modules for ET 200S, 2 DO relay 24 V DC-230 V AC/5 A, 15 mm width, Substitute value output with LED SF (group fault) 5 units per packing unit', null, 'SIEMENS', '332'), ('19', '6ES7390-0AA00-0AA0', 'SIMATIC S7, Bus connector (replacement part)', null, 'SIEMENS', '11'), ('20', '3SB3420-0B', 'SCHAKELELEMENT Met 1 schakelelement, 1 NO, Schroefaansluiting, Voor bodembevestiging !!! Uitlopend product!!! Opvolger is SIRIUS ACT 3SU1 Voorkeurstype opvolger is >>3SU1400-2AA10-1BA0<<', 'NMV', 'SIEMENS', null), ('21', '6ES7193-4CA50-0AA0', '*** Spare part *** SIMATIC DP, 5 universal terminal modules TM-E15C26-A1 for ET 200S for electronic modules 15 mm width, Spring-type terminals, 2x6 terminal connections with terminal access to AUX1, AUX1 continuous 5 units per packing unit', null, 'SIEMENS', '98'), ('22', '750-613 System Power Supply', 'System Power Supply; 24 VDC', null, 'WAGO', '168.7'), ('23', '6ES7132-4BB31-0AB0', '*** Spare part *** SIMATIC DP, 5 electronic modules for ET 200S, 2 DO High Feature 24 V DC/2 A, 15 mm width, Diagnostics short circuit and wire break, Substitute value output with LED SF (group fault) 5 units per packing unit', null, 'SIEMENS', '455'), ('24', '3SB3901-0AC', 'Drager met drukstuk Voor bediening van de middelste Van 3 schakelelementen Voor knevel, Veiligheidsslot en Dubbele drukknoppen Met frontplaatbevestiging !!! Uitlopend product!!! Opvolger is SIRIUS ACT 3SU1', 'NMV', 'SIEMENS', null);
INSERT INTO "public"."zone" ("zone") VALUES ('22A'), ('25B'), ('26B');
INSERT INTO "public"."item" ("item_id", "materiaal_id", "zone", "doel", "verpakking", "aantal", "comment") VALUES ('1', '5', '26B', 'for sale', 'gesloten', '24', null), ('2', '7', '26B', 'for sale', 'gesloten', '22', 'OPVOLGER 3RT2015-1AP01'), ('3', '14', '26B', 'for sale', 'gesloten', '27', 'OPVOLGER 3RT2916-1CD00'), ('4', '1', '26B', 'for sale', 'gesloten', '10', '10st/doos . OPVOLGER 3SU1400-1AA10-1HA0'), ('5', '20', '26B', 'for sale', 'gesloten', '18', '1 doos: 10 stuks en 1 doos: 8 stuks'), ('6', '16', '26B', 'for sale', 'gesloten', '11', null), ('7', '4', '26B', 'for sale', 'gesloten', '40', '20st/doos'), ('8', '24', '26B', 'for sale', 'gesloten', '10', '10st/doos'), ('9', '15', '25B', 'for sale', 'gesloten', '10', '5 ST/DOOS'), ('10', '3', '25B', 'for sale', 'geen', '14', null), ('11', '23', '25B', 'for sale', 'gesloten', '13', null), ('12', '9', '25B', 'for sale', 'gesloten', '40', '5 ST/DOOS'), ('13', '12', '25B', 'for sale', 'gesloten', '40', null), ('14', '18', '25B', 'for sale', 'open', '20', null), ('15', '2', '25B', 'for sale', 'gesloten', '21', null), ('16', '8', '25B', 'for sale', 'gesloten', '13', null), ('17', '13', '25B', 'for sale', 'gesloten', '10', null), ('18', '10', '25B', 'for sale', 'gesloten', '90', null), ('19', '21', '25B', 'for sale', 'gesloten', '80', null), ('20', '6', '25B', 'for sale', 'gesloten', '10', null), ('21', '11', '25B', 'for sale', 'gesloten', '52', null), ('22', '17', '25B', 'for sale', 'gesloten', '22', null), ('23', '19', '25B', 'for sale', 'geen', '78', null), ('24', '22', '22A', 'for sale', 'open', '10', '10 stuks in doos ');

#INSERT UNTO "public"."gebruiker"